<!DOCTYPE html>
<html>

<head>
    <title>
        Dash
    </title>
</head>

<body>
    <div style="text-align:center;">
        <h1>
            CITS3002
        </h1>
        <h2>
            Answer the damn questions :)
        </h2>
        <div style="margin-top: 10vh">
            <div id="Question"></div>
            <br/>


            <div id="options">
                <button id="o1" onclick="submit(0)"></button>
                <button id="o2" onclick="submit(1)"></button>
                <button id="o3" onclick="submit(2)"></button>
            </div>
        </div>
    </div>
</body>
<script>
    var xhr = new XMLHttpRequest();
    sendDat = {'uname': window.localStorage.uname, 'token': window.localStorage.token}
    xhr.open('POST', "https://localhost:3000/getQuestionData", true);
    xhr.send(JSON.stringify(sendDat));
    function processRequest(e) {
        if (xhr.readyState == 4 && xhr.status == 200) {
            var response = JSON.parse(xhr.responseText);
            console.log(response);
            if(response.question){
                document.getElementById("Question").innerHTML = response.question;
                document.getElementById("o1").innerHTML = response.options[0];
                document.getElementById("o2").innerHTML = response.options[1];
                document.getElementById("o3").innerHTML = response.options[2];
            }
            else{
                window.location.replace("https://localhost:3000/");
            }
        }
    }
    xhr.addEventListener("readystatechange", processRequest, false);

</script>

</html>